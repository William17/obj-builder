{"version":3,"file":"obj-build.min.js","sources":["../esm/index.js"],"sourcesContent":["var Builder = (function () {\n    function Builder(defaultObject) {\n        if (typeof defaultObject === 'function') {\n            defaultObject = defaultObject();\n        }\n        this.targetObj = defaultObject || {};\n    }\n    Builder.prototype.from = function (source) {\n        this.source = source;\n        return this;\n    };\n    Builder.prototype.pick = function (fieldList) {\n        var isArray = this.isArray;\n        if (!isArray(fieldList)) {\n            throw new Error(fieldList + ' is not an array');\n        }\n        var _a = this, targetObj = _a.targetObj, source = _a.source;\n        fieldList.forEach(function (field) {\n            var key;\n            var defaultValue;\n            if (isArray(field)) {\n                key = field[0];\n                defaultValue = field[1];\n            }\n            else {\n                key = field;\n            }\n            var val = source[key];\n            targetObj[key] = val === undefined ? defaultValue : val;\n        });\n        return this;\n    };\n    Builder.prototype.map = function (fieldObject) {\n        var isArray = this.isArray;\n        if (typeof fieldObject !== 'object') {\n            throw new Error(fieldObject + ' is not an object');\n        }\n        var _a = this, targetObj = _a.targetObj, source = _a.source;\n        Object.keys(fieldObject).forEach(function (field) {\n            var key;\n            var defaultValue;\n            var originField = fieldObject[field];\n            if (isArray(originField)) {\n                key = originField[0];\n                defaultValue = originField[1];\n            }\n            else {\n                key = originField;\n            }\n            var val = source[key];\n            targetObj[field] = val === undefined ? defaultValue : val;\n        });\n        return this;\n    };\n    Builder.prototype.compute = function (field, fn) {\n        var _this = this;\n        if (typeof field === 'object') {\n            Object.keys(field).forEach(function (key) {\n                _this.compute(key, field[key]);\n            });\n        }\n        else {\n            if (typeof fn === 'function') {\n                this.computeOne(field, fn);\n            }\n        }\n        return this;\n    };\n    Builder.prototype.computeOne = function (field, fn) {\n        var _a = this, targetObj = _a.targetObj, source = _a.source;\n        targetObj[field] = fn(source);\n        return this;\n    };\n    Builder.prototype.assign = function (obj) {\n        Object.assign(this.targetObj, obj);\n        return this;\n    };\n    Builder.prototype.custom = function (fn) {\n        fn(this.targetObj, this.source);\n        return this;\n    };\n    Builder.prototype.pickIf = function () {\n        return this.callIf('pick', arguments);\n    };\n    Builder.prototype.mapIf = function () {\n        return this.callIf('map', arguments);\n    };\n    Builder.prototype.computeIf = function () {\n        return this.callIf('compute', arguments);\n    };\n    Builder.prototype.assignIf = function () {\n        return this.callIf('assign', arguments);\n    };\n    Builder.prototype.customIf = function () {\n        return this.callIf('custom', arguments);\n    };\n    Builder.prototype.val = function () {\n        return this.targetObj;\n    };\n    Builder.prototype.isTrueVal = function (val) {\n        if (typeof val === 'function') {\n            return val(this.source);\n        }\n        return val;\n    };\n    Builder.prototype.isArray = function (val) {\n        return Array.isArray(val);\n    };\n    Builder.prototype.callIf = function (method, args) {\n        if (this.isTrueVal(args[0])) {\n            args = [].slice.call(args, 1);\n            return this[method].apply(this, args);\n        }\n        return this;\n    };\n    return Builder;\n}());\nexport default function build(defaultObject) {\n    return new Builder(defaultObject);\n}\n//# sourceMappingURL=index.js.map"],"names":["Builder","prototype","from","source","this","pick","fieldList","isArray","Error","targetObj","forEach","field","key","defaultValue","val","undefined","map","fieldObject","keys","originField","compute","fn","_this","computeOne","assign","obj","custom","pickIf","callIf","arguments","mapIf","computeIf","assignIf","customIf","isTrueVal","Array","method","args","slice","call","apply","defaultObject"],"mappings":"iMAAA,IAAIA,KAOQC,UAAUC,KAAO,SAAUC,eAC1BA,OAASA,EACPC,QAEHH,UAAUI,KAAO,SAAUC,OAC3BC,EAAUH,KAAKG,YACdA,EAAQD,SACH,IAAIE,MAAMF,EAAY,wBAEjBG,EAANL,KAAqBK,UAAWN,EAAhCC,KAA4CD,gBAC3CO,QAAQ,SAAUC,OACpBC,EACAC,EACAN,EAAQI,MACFA,EAAM,KACGA,EAAM,MAGfA,MAENG,EAAMX,EAAOS,KACPA,QAAeG,IAARD,EAAoBD,EAAeC,IAEjDV,QAEHH,UAAUe,IAAM,SAAUC,OAC1BV,EAAUH,KAAKG,WACQ,iBAAhBU,QACD,IAAIT,MAAMS,EAAc,yBAEnBR,EAANL,KAAqBK,UAAWN,EAAhCC,KAA4CD,qBAC9Ce,KAAKD,GAAaP,QAAQ,SAAUC,OACnCC,EACAC,EACAM,EAAcF,EAAYN,GAC1BJ,EAAQY,MACFA,EAAY,KACHA,EAAY,MAGrBA,MAENL,EAAMX,EAAOS,KACPD,QAAiBI,IAARD,EAAoBD,EAAeC,IAEnDV,QAEHH,UAAUmB,QAAU,SAAUT,EAAOU,OACrCC,EAAQlB,WACS,iBAAVO,SACAO,KAAKP,GAAOD,QAAQ,SAAUE,KAC3BQ,QAAQR,EAAKD,EAAMC,MAIX,mBAAPS,QACFE,WAAWZ,EAAOU,GAGxBjB,QAEHH,UAAUsB,WAAa,SAAUZ,EAAOU,OAC7BZ,EAANL,KAAqBK,UAAWN,EAAhCC,KAA4CD,gBAC3CQ,GAASU,EAAGlB,GACfC,QAEHH,UAAUuB,OAAS,SAAUC,iBAC1BD,OAAOpB,KAAKK,UAAWgB,GACvBrB,QAEHH,UAAUyB,OAAS,SAAUL,YAC9BjB,KAAKK,UAAWL,KAAKD,QACjBC,QAEHH,UAAU0B,OAAS,kBAChBvB,KAAKwB,OAAO,OAAQC,cAEvB5B,UAAU6B,MAAQ,kBACf1B,KAAKwB,OAAO,MAAOC,cAEtB5B,UAAU8B,UAAY,kBACnB3B,KAAKwB,OAAO,UAAWC,cAE1B5B,UAAU+B,SAAW,kBAClB5B,KAAKwB,OAAO,SAAUC,cAEzB5B,UAAUgC,SAAW,kBAClB7B,KAAKwB,OAAO,SAAUC,cAEzB5B,UAAUa,IAAM,kBACbV,KAAKK,aAERR,UAAUiC,UAAY,SAAUpB,SACjB,mBAARA,EACAA,EAAIV,KAAKD,QAEbW,KAEHb,UAAUM,QAAU,SAAUO,UAC3BqB,MAAM5B,QAAQO,MAEjBb,UAAU2B,OAAS,SAAUQ,EAAQC,UACrCjC,KAAK8B,UAAUG,EAAK,OACb,GAAGC,MAAMC,KAAKF,EAAM,GACpBjC,KAAKgC,GAAQI,MAAMpC,KAAMiC,IAE7BjC,MAEJJ,YAlHEA,EAAQyC,GACgB,mBAAlBA,MACSA,UAEfhC,UAAYgC,GAAiB,aAgH3B,SAAeA,UACnB,IAAIzC,EAAQyC"}